chrome.runtime.onMessage.addListener((t,o,r)=>{if(t.action==="classifyPage")return fetch("https://pleonova-subject-matter.hf.space/predict",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:[t.content]})}).then(e=>e.ok?e.json():(console.error(`API responded with status ${e.status}`),e.text())).then(e=>{e&&typeof e=="string"?(console.error("Unexpected response format:",e),r({subject:"Error - Unexpected response from API"})):e&&e.label?r({subject:e.label}):r({subject:"Unknown"})}).catch(e=>{console.error("Error calling API:",e),r({subject:"Error - API call failed"})}),!0});
